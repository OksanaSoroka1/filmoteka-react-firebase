{"version":3,"file":"static/js/66.21dc4493.chunk.js","mappings":"kOAOMA,EAAc,CAAC,CAAEC,KAAK,WAAaC,MAAO,mBAC9C,CAAED,KAAK,YAAcC,MAAO,oBAC1B,CAAED,KAAK,WAAaC,MAAO,oBAiD/B,UA/CiB,SAAC,GAAe,IAAbA,EAAY,EAAZA,MAChB,GAAuDC,EAAAA,EAAAA,KAAhDC,EAAP,EAAOA,UAAWC,EAAlB,EAAkBA,WAAYC,EAA9B,EAA8BA,cAAeC,EAA7C,EAA6CA,QAEnCC,GAAWC,EAAAA,EAAAA,MACrB,GAA+BC,EAAAA,EAAAA,KAAvBC,EAAR,EAAQA,UAAYC,EAApB,EAAoBA,QAgCpB,OA/BAC,EAAAA,EAAAA,YAAU,YACgB,WAAO,IAAD,IACpB,UAAAL,EAASM,aAAT,SAAgBC,WAAhB,UAA8BP,EAASM,aAAvC,OAA8B,EAAgBE,YAA0B,MAAZL,EAC5DM,QAAQC,IAAI,qBAGhBD,QAAQC,IAAI,cACfN,EAAQ,MAETO,KAEF,CAACX,KACHK,EAAAA,EAAAA,YAAU,WAEN,OAAQL,EAASY,UAEb,IAAI,GAAJ,OAAQC,EAAAA,EAAR,YACId,EAAQe,EAAAA,GAAmBX,GAC3B,MACH,IAAI,GAAJ,OAAQU,EAAAA,EAAR,aACGd,EAAQgB,EAAAA,GAAmBZ,GAC3B,MACH,IAAI,GAAJ,OAAQU,EAAAA,EAAR,YACGd,EAAQiB,EAAAA,GAAmBb,MAMpC,CAACH,EAAUG,KAIV,SAAC,IAAD,CAAkBL,cAAeA,EAC7BJ,MAAOA,EACPE,UAAWA,EACXqB,QAASzB,EACTK,WAAYA,M,oHClDXF,EAAe,WACvB,OAAkCuB,EAAAA,EAAAA,UAAS,IAA3C,eAAOtB,EAAP,KAAkBuB,EAAlB,KAED,GAAoCD,EAAAA,EAAAA,UAAS,GAA7C,eAAOrB,EAAP,KAAmBuB,EAAnB,KACA,GAA4CC,EAAAA,EAAAA,KAApCvB,EAAR,EAAQA,cAAewB,EAAvB,EAAuBA,iBACvB,GAAwCJ,EAAAA,EAAAA,UAAS,IAAjD,eAAOK,EAAP,KAAqBC,EAArB,KACMxB,GAAWC,EAAAA,EAAAA,OAChBI,EAAAA,EAAAA,YAAU,WACLmB,EAAgB5B,KAUlB,CAA2BA,IAE/B,IAAMG,EAAO,yCAAG,WAAO0B,EAAUtB,EAAWuB,EAAQC,GAApC,2FACR3B,EAASM,aADD,QACR,EAAgBC,UADR,iEAIPe,EAAiB,WAJV,SAKYG,EAAStB,EAAWuB,EAAQC,GALxC,OAKDC,EALC,OAOPN,EAAiB,UACjBH,EAAaS,EAAKC,SAClBD,EAAKE,MAAOV,EAAcQ,EAAKE,OAASV,EAAcQ,EAAKG,aATpD,kDAYPT,EAAiB,SACdb,QAAQC,IAAR,MAbI,0DAAH,4DAkBb,MAAO,CACHd,UAAAA,EACA2B,aAAAA,EACA1B,WAAAA,EACAC,cAAAA,EAEAC,QAAAA,EACAyB,gBAAAA","sources":["features/pages/Home/Home.js","hooks/useFilmsList.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { getTrendMovieList, getTopRatedMovies, getUpcomingMovies } from '../../../API/films';\r\nimport { FilmsListSection } from '../../sections/FilmsListSection';\r\nimport { useFilmsList } from '../../../hooks/useFilmsList';\r\nimport { useFetchPage } from '../../../hooks/useFetchPage';\r\nimport { baseURL } from '../../components/Routes'; \r\nconst homePathArr = [{ path: `trending`, title: 'Trending movies' },\r\n  { path: `top-rated`, title: 'Top-rated movies' },\r\n    { path: `upcoming`, title: 'Upcoming movies' }]\r\n  \r\nconst HomePage = ({ title }) => { \r\n    const {filmsList, totalPages, loadingStatus, setList }=useFilmsList()\r\n/*     const [fetchPage, setFetchPage] = useState('1');\r\n */     const location = useLocation();\r\n    const { fetchPage , setPage} = useFetchPage()\r\n    useEffect(() => { \r\n        const onNewLocation = () => {\r\n            if (location.state?.fromModal  || location.state?.background || fetchPage==='1') {\r\n                console.log('state from modal')\r\n                 return\r\n            }\r\n            console.log('set 1 page')\r\n         setPage('1') \r\n        }\r\n        onNewLocation()\r\n       \r\n    },[location])\r\n    useEffect(() => {\r\n       /*  console.log(`fetch page became ${fetchPage} in home`) */\r\n        switch (location.pathname) {\r\n            \r\n            case `${baseURL}trending`:\r\n                setList(getTrendMovieList, fetchPage)\r\n                break;\r\n             case `${baseURL}top-rated`:\r\n                setList(getTopRatedMovies, fetchPage)\r\n                break;\r\n             case `${baseURL}upcoming`:\r\n                setList(getUpcomingMovies, fetchPage)\r\n                break;\r\n        \r\n            default:\r\n                break;\r\n        }     \r\n    }, [location, fetchPage])\r\n    \r\n    return (\r\n        \r\n        <FilmsListSection loadingStatus={loadingStatus}\r\n            title={title}\r\n            filmsList={filmsList}\r\n            pathArr={homePathArr}\r\n            totalPages={totalPages}\r\n            /* setFetchPage={setFetchPage} */></FilmsListSection>\r\n        \r\n    )\r\n}\r\nexport default HomePage","import { useState, useEffect } from \"react\";\r\nimport { useLoadingStatus } from \"./useLoadingstatus\";\r\nimport { useLocation } from \"react-router-dom\";\r\nexport const useFilmsList = () => { \r\n     const [filmsList, setFilmsList] = useState([]);\r\n   \r\n    const [totalPages, setTotalPages] = useState(0);\r\n    const { loadingStatus, setLoadingStatus } = useLoadingStatus();\r\n    const [filteredList, setFilteredList] = useState([]);\r\n    const location = useLocation();\r\n     useEffect(() => {\r\n          setFilteredList(filmsList)\r\n        /* if (!movieFilters.genre) {\r\n\r\n            setFilteredList(filmsList)\r\n            return\r\n         }\r\n        const filteredFilms = filmsList.filter(film => {\r\n            return film.genre_ids.includes(Number(movieFilters.genre))\r\n        });\r\n        setFilteredList(filteredFilms) */\r\n     }, [/* movieFilters.genre, */ filmsList])\r\n    \r\n    const setList = async (apiFilms, fetchPage, search, year) => { \r\n        if (location.state?.fromModal) {return }\r\n         try {\r\n             \r\n             setLoadingStatus('pending')\r\n             const data = await apiFilms(fetchPage, search, year);  \r\n             /*  console.log(data) */\r\n             setLoadingStatus('loaded')\r\n             setFilmsList(data.results)\r\n             data.pages? setTotalPages(data.pages) : setTotalPages(data.total_pages)\r\n             \r\n         } catch (error) {\r\n             setLoadingStatus('error')\r\n                console.log(error)\r\n            }\r\n    }\r\n     \r\n    \r\n    return {\r\n        filmsList,\r\n        filteredList,\r\n        totalPages,\r\n        loadingStatus,\r\n       \r\n        setList,\r\n        setFilteredList\r\n    }\r\n}"],"names":["homePathArr","path","title","useFilmsList","filmsList","totalPages","loadingStatus","setList","location","useLocation","useFetchPage","fetchPage","setPage","useEffect","state","fromModal","background","console","log","onNewLocation","pathname","baseURL","getTrendMovieList","getTopRatedMovies","getUpcomingMovies","pathArr","useState","setFilmsList","setTotalPages","useLoadingStatus","setLoadingStatus","filteredList","setFilteredList","apiFilms","search","year","data","results","pages","total_pages"],"sourceRoot":""}